<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Christmas Card To Ate</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --red-main: #17635c;
        --red-dark: #0b453f;
        --gold: #d4af37;
        --env-color: #8b0000;
      }

      body {
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: radial-gradient(circle at center, #1a1a1a, #000);
        perspective: 2000px;
        overflow: hidden;
        font-family: "Arial", sans-serif;
      }

      .card-system {
        position: relative;
        width: 420px;
        height: 540px;
        transform-style: preserve-3d;
        /* transform: rotateX(25deg) rotateY(20deg); */
        transition: transform 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        cursor: pointer;
        /* Hi·ªáu ·ª©ng hi·ªán ra */
        opacity: 0;
        visibility: hidden;
        transform: translateX(-100px) scale(0.5) rotateY(20deg);
        flex-shrink: 0;
      }
      .main-container.active .card-system {
        opacity: 1;
        visibility: visible;
        transform: translateX(0) scale(1) rotateY(0deg);
      }

      .card-system:hover .card-cover {
        /* transform: rotateX(20deg) rotateY(10deg); */
        transform: rotateY(-40deg);
      }

      .card-system.open {
        transform: rotateY(0deg);
      }

      .card-inside {
        position: absolute;
        width: 100%;
        height: 100%;
        /* background: #fffef5; */
        background: linear-gradient(135deg, #f1f1e4 0%, #fff8e7 100%);
        border-radius: 5px;
        display: flex;
        flex-direction: column; /* S·∫Øp x·∫øp theo c·ªôt */
        justify-content: flex-start; /* B·∫Øt ƒë·∫ßu t·ª´ tr√™n xu·ªëng */
        align-items: center;
        padding: 40px 25px;
        box-sizing: border-box;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5),
          inset 10px 0 30px rgba(0, 0, 0, 0.1);
      }

      .card-inside h2 {
        font-family: "Great Vibes", cursive;
        color: #c41e3a;
        font-size: 3.5em;
        margin: 40px 0 15px 0;
      }

      .card-inside p.message {
        font-family: "Quicksand", cursive;
        font-weight: 500;
        font-size: 1.2rem;
        line-height: 1.6;
        color: #474646;
        margin: 10px 0;
        font-style: italic;
        text-align: center;
      }

      /* PH·∫¶N T√äN G·ª¨I/NH·∫¨N: D√πng Flex ƒë·ªÉ ƒë·∫©y xu·ªëng g√≥c ph·∫£i */
      .card-footer {
        margin-top: auto; /* ƒê·∫©y to√†n b·ªô kh·ªëi n√†y xu·ªëng ƒë√°y */
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: flex-end; /* CƒÉn l·ªÅ c√°c ph·∫ßn t·ª≠ con sang ph·∫£i */
        text-align: right;
      }

      .card-names {
        font-family: "Great Vibes", cursive;
        font-size: 1.7rem;
        color: #444;
        line-height: 1.5;
      }

      .card-names span {
        font-weight: 600;
        font-size: 1rem;
        font-family: "Quicksand", cursive;
        color: var(--red-main);
        /* border-bottom: 1px solid var(--gold); */
        padding: 0 5px;
      }

      .card-cover {
        position: absolute;
        width: 100%;
        height: 100%;
        transform-origin: left;
        transform-style: preserve-3d;
        transition: transform 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 2;
        transform: rotateY(-37deg);
      }

      .card-system.open .card-cover {
        transform: rotateY(-132deg);
      }

      .cover-front {
        box-shadow: 12px 15px 20px rgb(0 0 0 / 67%);
        position: absolute;
        width: 100%;
        height: 100%;
        background: url("https://www.transparenttextures.com/patterns/snow.png"),
          linear-gradient(135deg, var(--red-main), var(--red-dark));
        border-radius: 5px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border: 1px solid rgba(255, 255, 255, 0.1);
        overflow: hidden;
        backface-visibility: hidden;
        padding-top: 20px;
      }

      .cover-front::after {
        content: "";
        position: absolute;
        top: -50%;
        left: -100%;
        width: 50%;
        height: 200%;
        background: rgba(255, 255, 255, 0.1);
        transform: rotate(30deg);
        animation: shine 4s infinite;
      }

      @keyframes shine {
        0% {
          left: -100%;
        }
        20% {
          left: 150%;
        }
        100% {
          left: 150%;
        }
      }

      .gold-border {
        position: absolute;
        top: 15px;
        bottom: 15px;
        left: 20px;
        right: 20px;
        border: 2px solid var(--gold);
        opacity: 0.6;
        pointer-events: none;
      }
      .gold-border2 {
        position: absolute;
        top: 26px;
        bottom: 24px;
        left: 10px;
        right: 10px;
        border: 2px solid #ffeba9;
        opacity: 0.6;
        pointer-events: none;
      }

      .cover-front h1 {
        font-family: "Quicksand", serif;
        font-size: 2rem;
        color: #fff;
        text-align: center;
        line-height: 1.3;
        margin: 20px 0;
        text-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        z-index: 3;
      }

      .cover-front .icon {
        font-size: 80px;
        filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.4));
        animation: float 3s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .cover-back {
        position: absolute;
        width: 100%;
        height: 100%;
        /* background: #fdfdfd; */
        background: linear-gradient(135deg, #f1f1e4 0%, #fff8e7 100%);
        transform: rotateY(180deg);
        backface-visibility: hidden;
        border-radius: 5px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-shadow: inset -10px 0 30px rgba(0, 0, 0, 0.05);
      }

      .music-ui {
        text-align: center;
      }

      .music-info {
        font-size: 20px;
        color: var(--red-main);
        margin-bottom: 20px;
        font-weight: bold;
        letter-spacing: 1px;
      }

      .equalizer {
        display: flex;
        align-items: flex-end;
        justify-content: center;
        height: 40px;
        gap: 3px;
        opacity: 0;
        transition: opacity 0.5s;
      }

      .playing .equalizer {
        opacity: 1;
      }

      .bar {
        width: 4px;
        background: var(--red-main);
        animation: equalize 1s ease-in-out infinite;
        border-radius: 2px;
      }

      .bar:nth-child(1) {
        height: 10px;
        animation-delay: -0.2s;
      }
      .bar:nth-child(2) {
        height: 30px;
        animation-delay: -0.4s;
      }
      .bar:nth-child(3) {
        height: 15px;
        animation-delay: -0.6s;
      }
      .bar:nth-child(4) {
        height: 25px;
        animation-delay: -0.1s;
      }
      .bar:nth-child(5) {
        height: 35px;
        animation-delay: -0.3s;
      }
      .bar:nth-child(6) {
        height: 10px;
        animation-delay: -0.5s;
      }

      @keyframes equalize {
        0%,
        100% {
          height: 10px;
        }
        50% {
          height: 40px;
        }
      }

      .snowflake {
        position: absolute;
        top: -10px;
        color: white;
        pointer-events: none;
        animation: fall linear infinite;
      }

      @keyframes fall {
        to {
          transform: translateY(110vh) rotate(360deg);
        }
      }
      .open-instruction {
        position: absolute;
        bottom: 0;
        right: 22px;
        font-size: 2.5em;
        cursor: pointer;
        z-index: 5;
        animation: fingerTap 1.5s infinite;
      }
      @keyframes fingerTap {
        0%,
        100% {
          transform: scale(1) translateY(0);
          opacity: 0.8;
        }
        50% {
          transform: scale(0.9) translateY(10px);
          opacity: 1;
        }
      }
      .tree-svg {
        width: 80px;
        margin-bottom: 20px;
        fill: #fff8e7;
      }

      /* --- PH·∫¶N PHONG B√å --- */
      .envelope {
        position: relative;
        /* width: 350px;
        height: 250px; */
        width: 540px;
        height: 420px;
        background-color: var(--env-color);
        border-radius: 5px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        cursor: pointer;
        transition: all 0.8s ease-in-out;
        flex-shrink: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        transform-style: preserve-3d;
        z-index: 10;
      }
    .envelope .envelope-flap{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 200px;
        background: linear-gradient(to bottom, #970b23 0%, #680516 100%);
        clip-path: polygon(0 0, 100% 0, 50% 100%);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2), inset 0 -1px 2px rgba(0, 0, 0, 0.1);
        transform-origin: top center;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10;
    }
      /* N·∫Øp phong b√¨ */
      .envelope.opened::before {
        content: "";
        position: absolute;
        top: 0;
        width: 0;
        height: 0;
        border-top: 200px solid #700400;
        border-left: 270px solid transparent;
        border-right: 270px solid transparent;
        z-index: 5;
        transform-origin: top;
        transition: transform 0.5s;
        backface-visibility: hidden;
      } 

      .envelope.opened .envelope-flap {
        transform: rotateX(160deg);
        z-index: 0;
      }

      .envelope-text {
        margin-top: 60px;
        color: var(--gold);
        font-family: "Great Vibes", cursive;
        font-size: 2rem;
        text-align: center;
        pointer-events: none;
      }

      .main-container {
        transform-style: preserve-3d; /* Gi·ªØ m√¥i tr∆∞·ªùng 3D */
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        transition: all 1s ease-in-out;
        /* width: 90%;
            max-width: 1000px;  */
      }

      .tree {
        margin-bottom: 20px;
        position: relative;
        transform-style: preserve-3d; /* Ensure children are rendered in 3D space */
        transform: rotateX(10deg); /* Rotate the tree to face the correct direction */
      }
      .star {
        position: absolute;
        font-size: 12px;
        opacity: 0;
        animation: twinkle 1s infinite alternate, appear 5s forwards;
      }
      @keyframes twinkle {
        from { opacity: 1; }
        to { opacity: 0.5; }
      }
      @keyframes appear {
        from { opacity: 0; }
        to { opacity: 1; }
      }
    </style>
  </head>
  <body>
    <audio
      id="bgMusic"
      src="https://s3.ustatik.com/audio.com.audio/transcoding/56/75/1816683116807556-1816683116895237-1816683118723611.mp3?X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=W7IA3NSYSOQIKLY9DEVC%2F20251219%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20251219T072123Z&X-Amz-SignedHeaders=host&X-Amz-Expires=518400&X-Amz-Signature=623761d7f8c290ca226f0c511dc6f8d486058a941882774e23e0bea21d180d96"
    ></audio>
    <div class="main-container" id="mainContainer">
      <div class="envelope" id="envelope" onclick="openEnvelope()">
        <div class="envelope-flap"></div>
        <div class="envelope-front"></div>
        <div class="envelope-text">
          D√†nh cho Ate l√πn<br /><small
            style="font-size: 0.8rem; font-family: 'Quicksand'"
            >Nh·∫•n z√¥ ƒë√¢y ik</small
          >
        </div>
      </div>
      <div class="card-system" id="card" onclick="toggleCard()">
        <div class="card-inside">
          <h2>Merry Christmas</h2>

          <p class="message">
            Ch√∫c em Gi√°ng sinh ·∫•m √°p, tr√†n ƒë·∫ßy ni·ªÅm vui v√† h·∫°nh ph√∫c. <br />
            Ch√∫c m·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp s·∫Ω ƒë·∫øn v·ªõi em trong nƒÉm m·ªõi 2026 nh√©!<br />
            Alles Gute im neuen Jahr!!!
          </p>

          <div style="font-size: 30px; margin: 20px 0">üéÅüéÖ‚ùÑÔ∏è</div>

          <div class="card-footer">
            <div class="card-names">
              Th√¢n g·ª≠i: <span>Ate</span><br />
              T·ª´: <span>Tui</span>
            </div>
          </div>
        </div>

        <div class="card-cover">
          <!-- <div class="cover-front">
                <div class="gold-border"></div>
                <div class="icon">üéÑ</div>
                <h1>MERRY<br>CHRISTMAS</h1>
                <p style="color: var(--gold); font-size: 12px; letter-spacing: 3px;">CLICK TO OPEN</p>
            </div> -->
          <div class="cover-front">
            <div class="gold-border"></div>
            <div class="gold-border2"></div>

            <!-- <svg class="tree-svg" viewBox="0 0 100 120">
              <path
                d="M50 10 L15 60 L30 60 L10 100 L90 100 L70 60 L85 60 Z"
              ></path>
              <rect x="45" y="100" width="10" height="15"></rect>
            </svg> -->
            <div class="tree" id="tree"></div>
            <p
              style="
                color: #fff;
                font-size: 18px;
                margin: 0;
                letter-spacing: 2px;
                font-family: 'Quicksand', serif;
              "
            >
              HAVE YOURSELF A
            </p>

            <div
              style="background: var(--gold); padding: 5px 40px; margin: 15px 0"
            >
              <h1
                style="
                  color: #8b0000;
                  font-size: 2.5rem;
                  margin: 0;
                  font-family: 'Quicksand', serif;
                  text-shadow: none;
                "
              >
                MERRY
              </h1>
            </div>

            <p
              style="
                color: #fff;
                font-size: 1.2rem;
                margin: 0;
                letter-spacing: 5px;
              "
            >
              ‚Ä¢ LITTLE ‚Ä¢
            </p>

            <h1
              style="
                color: #fff;
                font-size: 2.2rem;
                margin: 10px 0;
                font-family: 'Quicksand', serif;
                letter-spacing: 2px;
              "
            >
              CHRISTMAS
            </h1>

            <div
              style="
                display: flex;
                align-items: center;
                gap: 10px;
                margin-top: 10px;
              "
            >
              <div
                style="width: 40px; height: 2px; background: var(--gold)"
              ></div>
              <span
                style="color: var(--gold); font-size: 1.5rem; font-weight: bold"
                >2025</span
              >
              <div
                style="width: 40px; height: 2px; background: var(--gold)"
              ></div>
            </div>

            <p class="open-instruction">üëâ</p>
          </div>
          <div class="cover-back">
            <div class="music-ui">
              <div class="music-info">‚ô™ Snowman - Sia</div>
              <div class="equalizer">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
              </div>
            </div>
            <div
              id="musicStatus"
              style="
                margin-top: 30px;
                font-size: 14px;
                color: #999;
                letter-spacing: 1px;
              "
            >
              CLICK TO PLAY MUSIC
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="root"></div>
    <script>
      const audio = document.getElementById("bgMusic");
      const card = document.getElementById("card");
      const musicStatus = document.getElementById("musicStatus");
      const envelope = document.getElementById("envelope");
      const mainContainer = document.getElementById("mainContainer");

      let hasStarted = false;
      function openEnvelope() {
        if (!envelope.classList.contains("opened")) {
          envelope.classList.add("opened");
          mainContainer.classList.add("active");
        }
        createTree();

      }
      function toggleCard() {
        // Ch·ªâ cho ph√©p m·ªü thi·ªáp n·∫øu b√¨a th∆∞ ƒë√£ m·ªü
        if (!envelope.classList.contains("opened")) return;

        const isOpen = card.classList.toggle("open");

        if (isOpen) {
          if (!hasStarted) {
            audio.currentTime = 11;
            hasStarted = true;
          }
          audio
            .play()
            .catch((e) => console.log("Y√™u c·∫ßu t∆∞∆°ng t√°c ng∆∞·ªùi d√πng"));
          card.classList.add("playing");
          musicStatus.innerText = "NOW PLAYING...";
        } else {

          audio.pause();
          card.classList.remove("playing");
          musicStatus.innerText = "MUSIC PAUSED";
        }
      }

      function createSnowflake() {
        const flake = document.createElement("div");
        flake.innerHTML = "‚ùÑ";
        flake.className = "snowflake";
        flake.style.left = Math.random() * 100 + "vw";
        flake.style.opacity = Math.random();
        flake.style.fontSize = Math.random() * 15 + 10 + "px";
        flake.style.animationDuration = Math.random() * 3 + 2 + "s";
        document.body.appendChild(flake);
        setTimeout(() => flake.remove(), 5000);
      }
      setInterval(createSnowflake, 100);

      function getRandomColor() {
      const letters = '0123456789ABCDEF';
      let color = '#';
      for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }

    function createTree() {
      const tree = document.getElementById('tree');
      const layers = 5;
      let delay = 0;

      for (let i = 0; i < layers; i++) {
        const layerSize = (layers - i) * 10;
        const radius = (layers - i) * 15; // Increase radius to prevent overlapping
        for (let j = 0; j < layerSize; j++) {
          const star = document.createElement('div');
          star.className = 'star';
          const angle = (j / layerSize) * 2 * Math.PI;
          const x = radius * Math.cos(angle);
          const z = radius * Math.sin(angle);
          const y = i * 20;
          star.innerText = '*';
          star.style.color ='#fff';
          star.style.left = `${x}px`;
          star.style.bottom = `${y}px`;
          star.style.transform = `translateZ(${z}px)`;
          star.style.animationDelay = `${delay}s, ${delay + 1}s`;
          star.style.fontSize = `${12 + i}px`; // Increase size of each star
          tree.appendChild(star);

          delay += 0.01; // Delay each star slightly for animation
        }
      }

      // Add Top Star
      const topStar = document.createElement('div');
      topStar.className = 'star';
      topStar.innerText = 'üåü';
    //   topStar.style.color = getRandomColor(); // Golden Top Star
      topStar.style.fontSize = '22px';
      topStar.style.left = '-10px';
      topStar.style.bottom = `${(layers * 20) +  5}px`;
      topStar.style.transform = `translateZ(0px)`;
      topStar.style.animationDelay = `${delay}s, ${delay + 1}s`;
      tree.appendChild(topStar);
    }

    </script>
  </body>
</html>
